# å¤šç¯å¢ƒé…ç½®è¯´æ˜

## ğŸ“ é…ç½®æ–‡ä»¶ç»“æ„

```
travel-server/src/main/resources/
â”œâ”€â”€ application.yml              # ä¸»é…ç½®æ–‡ä»¶ï¼ˆå…¬å…±é…ç½®ï¼‰
â”œâ”€â”€ application-dev.yml         # å¼€å‘ç¯å¢ƒé…ç½®
â”œâ”€â”€ application-test.yml         # æµ‹è¯•ç¯å¢ƒé…ç½®
â””â”€â”€ application-prod.yml         # ç”Ÿäº§ç¯å¢ƒé…ç½®
```

## ğŸš€ å¯åŠ¨ä¸åŒç¯å¢ƒ

### å¼€å‘ç¯å¢ƒï¼ˆé»˜è®¤ï¼‰

```bash
# æ–¹å¼1ï¼šç›´æ¥å¯åŠ¨ï¼ˆé»˜è®¤ä½¿ç”¨devï¼‰
mvn spring-boot:run

# æ–¹å¼2ï¼šæ˜¾å¼æŒ‡å®š
mvn spring-boot:run -Dspring.profiles.active=dev

# æ–¹å¼3ï¼šä½¿ç”¨IDE
# åœ¨è¿è¡Œé…ç½®ä¸­æ·»åŠ  VM options: -Dspring.profiles.active=dev
```

### æµ‹è¯•ç¯å¢ƒ

```bash
# æ–¹å¼1ï¼šMavenå¯åŠ¨
mvn spring-boot:run -Dspring.profiles.active=test

# æ–¹å¼2ï¼šJaråŒ…å¯åŠ¨
java -jar travel-server.jar --spring.profiles.active=test

# æ–¹å¼3ï¼šç¯å¢ƒå˜é‡
export SPRING_PROFILES_ACTIVE=test
java -jar travel-server.jar
```

### ç”Ÿäº§ç¯å¢ƒ

```bash
# æ–¹å¼1ï¼šMavenå¯åŠ¨
mvn spring-boot:run -Dspring.profiles.active=prod

# æ–¹å¼2ï¼šJaråŒ…å¯åŠ¨
java -jar travel-server.jar --spring.profiles.active=prod

# æ–¹å¼3ï¼šç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰
export SPRING_PROFILES_ACTIVE=prod
java -jar travel-server.jar
```

## ğŸ”§ å„ç¯å¢ƒé…ç½®å¯¹æ¯”

| é…ç½®é¡¹ | å¼€å‘ç¯å¢ƒ | æµ‹è¯•ç¯å¢ƒ | ç”Ÿäº§ç¯å¢ƒ |
|--------|---------|---------|---------|
| æ•°æ®åº“ | localhost | æµ‹è¯•æœåŠ¡å™¨ | ç”Ÿäº§æœåŠ¡å™¨ |
| Redis | localhost | æµ‹è¯•æœåŠ¡å™¨ | ç”Ÿäº§æœåŠ¡å™¨ |
| é‚®ä»¶ | æ¨¡æ‹Ÿå‘é€ | æµ‹è¯•é‚®ç®± | ä¼ä¸šé‚®ç®± |
| æ—¥å¿—çº§åˆ« | debug | info | info |
| å‰ç«¯åŸŸå | localhost:5173 | test.your-domain.com | your-domain.com |
| API Key | æµ‹è¯•Key | æµ‹è¯•Key | ç”Ÿäº§Key |
| Druidç›‘æ§ | å¯ç”¨ | ç¦ç”¨ | ç¦ç”¨ |

## âš ï¸ ç”Ÿäº§ç¯å¢ƒå¿…å¡«é¡¹

ç”Ÿäº§ç¯å¢ƒå¿…é¡»é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```bash
# æ•°æ®åº“
DB_USERNAME=your-db-username
DB_PASSWORD=your-db-password

# Redis
REDIS_HOST=your-redis-host
REDIS_PASSWORD=your-redis-password

# é‚®ä»¶
MAIL_USERNAME=your-email@company.com
MAIL_PASSWORD=your-email-auth-code

# å‰ç«¯åŸŸå
FRONTEND_URL=https://your-domain.com

# JWTå¯†é’¥
JWT_SECRET=your-very-long-random-secret-key

# API Keys
AI_API_KEY=your-openai-api-key
WEATHER_API_KEY=your-weather-api-key
AMAP_API_KEY=your-amap-api-key
```

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### å¼€å‘ç¯å¢ƒï¼ˆæœ¬åœ°å¼€å‘ï¼‰

```bash
# é»˜è®¤å°±æ˜¯å¼€å‘ç¯å¢ƒï¼Œç›´æ¥å¯åŠ¨å³å¯
mvn spring-boot:run
```

### æµ‹è¯•ç¯å¢ƒï¼ˆåŠŸèƒ½æµ‹è¯•ï¼‰

```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export SPRING_PROFILES_ACTIVE=test
export DB_USERNAME=test_user
export DB_PASSWORD=test_password
export FRONTEND_URL=https://test.your-domain.com

# å¯åŠ¨æœåŠ¡
mvn spring-boot:run
```

### ç”Ÿäº§ç¯å¢ƒï¼ˆéƒ¨ç½²ä¸Šçº¿ï¼‰

```bash
# 1. åˆ›å»º .env æ–‡ä»¶
cp env.example .env
vi .env  # å¡«å†™çœŸå®é…ç½®

# 2. å¯¼å…¥ç¯å¢ƒå˜é‡
source .env

# 3. å¯åŠ¨æœåŠ¡
java -jar travel-server.jar --spring.profiles.active=prod
```

## ğŸ³ Dockeréƒ¨ç½²ç¤ºä¾‹

### docker-compose.yml

```yaml
version: '3.8'

services:
  backend:
    image: your-backend-image
    ports:
      - "8070:8070"
    environment:
      - SPRING_PROFILES_ACTIVE=prod
      - DB_USERNAME=${DB_USERNAME}
      - DB_PASSWORD=${DB_PASSWORD}
      - REDIS_HOST=redis
      - REDIS_PASSWORD=${REDIS_PASSWORD}
      - MAIL_USERNAME=${MAIL_USERNAME}
      - MAIL_PASSWORD=${MAIL_PASSWORD}
      - FRONTEND_URL=${FRONTEND_URL}
      - JWT_SECRET=${JWT_SECRET}
      - AI_API_KEY=${AI_API_KEY}
      - WEATHER_API_KEY=${WEATHER_API_KEY}
      - AMAP_API_KEY=${AMAP_API_KEY}
    env_file:
      - .env
    depends_on:
      - redis
      - mysql
```

## ğŸ” éªŒè¯å½“å‰ç¯å¢ƒ

å¯åŠ¨åï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯å½“å‰ç¯å¢ƒï¼š

1. **æŸ¥çœ‹å¯åŠ¨æ—¥å¿—**
   - æ—¥å¿—ä¸­ä¼šæ˜¾ç¤ºï¼š`The following profiles are active: dev`

2. **è®¿é—®å¥åº·æ£€æŸ¥æ¥å£**
   - `GET /api/health`
   - è¿”å›å½“å‰ç¯å¢ƒä¿¡æ¯

3. **æŸ¥çœ‹é…ç½®**
   - åœ¨ç”Ÿäº§ç¯å¢ƒè®¿é—® `/actuator/configprops`ï¼ˆéœ€è¦å¯ç”¨ï¼‰

## âš¡ å¿«é€Ÿåˆ‡æ¢

### IDEä¸­åˆ‡æ¢ç¯å¢ƒ

**IntelliJ IDEA:**
1. Run -> Edit Configurations
2. é€‰æ‹©è¿è¡Œé…ç½®
3. VM options: `-Dspring.profiles.active=prod`

**VS Code:**
1. launch.json ä¸­æ·»åŠ ï¼š
```json
{
  "configurations": [{
    "vmArgs": "-Dspring.profiles.active=prod"
  }]
}
```

### å‘½ä»¤è¡Œå¿«é€Ÿåˆ‡æ¢

```bash
# åˆ›å»ºåˆ«å
alias start-dev='export SPRING_PROFILES_ACTIVE=dev && mvn spring-boot:run'
alias start-test='export SPRING_PROFILES_ACTIVE=test && mvn spring-boot:run'
alias start-prod='export SPRING_PROFILES_ACTIVE=prod && mvn spring-boot:run'

# ä½¿ç”¨
start-dev    # å¯åŠ¨å¼€å‘ç¯å¢ƒ
start-test   # å¯åŠ¨æµ‹è¯•ç¯å¢ƒ
start-prod   # å¯åŠ¨ç”Ÿäº§ç¯å¢ƒ
```

## ğŸ“š æ›´å¤šä¿¡æ¯

- è¯¦ç»†é…ç½®è¯´æ˜è¯·å‚è€ƒå„ç¯å¢ƒé…ç½®æ–‡ä»¶ä¸­çš„æ³¨é‡Š
- ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²è¯·å‚è€ƒï¼š`ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²é…ç½®.md`
- ç¯å¢ƒå˜é‡ç¤ºä¾‹è¯·å‚è€ƒï¼š`env.example`

