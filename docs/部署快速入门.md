# éƒ¨ç½²å¿«é€Ÿå…¥é—¨æŒ‡å—

## ğŸš€ ä¸‰ç§éƒ¨ç½²æ–¹å¼å¿«é€Ÿé€‰æ‹©

### æ–¹å¼ä¸€ï¼šå®å¡”é¢æ¿ï¼ˆæœ€ç®€å•ï¼Œæ¨èæ–°æ‰‹ï¼‰

**é€‚åˆäººç¾¤ï¼š** å®Œå…¨æ–°æ‰‹ï¼Œä¸æƒ³æ•²å‘½ä»¤

**æ­¥éª¤ï¼š**

1. **è´­ä¹°æœåŠ¡å™¨**
   - è…¾è®¯äº‘/é˜¿é‡Œäº‘è´­ä¹° Ubuntu 22.04 æœåŠ¡å™¨
   - é…ç½®ï¼š2æ ¸4Gï¼Œå¸¦å®½3Mbps

2. **å®‰è£…å®å¡”**
   ```bash
   wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh
   sudo bash install.sh
   ```

3. **ç™»å½•é¢æ¿**
   - è®¿é—®ï¼š`http://ä½ çš„IP:8888`
   - å®‰è£…ï¼šNginxã€MySQLã€Redisã€Java 17

4. **ä¸Šä¼ æ–‡ä»¶**
   - ä¸Šä¼  `travel-server.jar` åˆ° `/www/wwwroot/travel-server`
   - ä¸Šä¼ å‰ç«¯ `dist` ç›®å½•åˆ° `/www/wwwroot/travel-admin`

5. **é…ç½®æ•°æ®åº“**
   - åœ¨é¢æ¿åˆ›å»ºæ•°æ®åº“ `travel_db`

6. **é…ç½® Nginx**
   - åˆ›å»ºç½‘ç«™ï¼Œé…ç½®åå‘ä»£ç†ï¼ˆå‚è€ƒå®Œæ•´æŒ‡å—ï¼‰

**ä¼˜ç‚¹ï¼š** å›¾å½¢åŒ–æ“ä½œï¼Œç®€å•æ˜“æ‡‚  
**ç¼ºç‚¹ï¼š** å ç”¨èµ„æºï¼Œéœ€è¦é¢å¤–å­¦ä¹ é¢æ¿æ“ä½œ

---

### æ–¹å¼äºŒï¼šDockerï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

**é€‚åˆäººç¾¤ï¼š** æœ‰ä¸€å®šåŸºç¡€ï¼Œæƒ³è¦æ ‡å‡†åŒ–éƒ¨ç½²

**æ­¥éª¤ï¼š**

1. **å®‰è£… Docker**
   ```bash
   curl -fsSL https://get.docker.com -o get-docker.sh
   sudo sh get-docker.sh
   ```

2. **è¿›å…¥é¡¹ç›®ç›®å½•**
   ```bash
   cd travel-server
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   cp .env.example .env
   # ç¼–è¾‘ .env æ–‡ä»¶ï¼Œè®¾ç½®æ•°æ®åº“å¯†ç ç­‰
   ```

4. **ä¸€é”®éƒ¨ç½²**
   ```bash
   chmod +x deploy/docker-deploy.sh
   ./deploy/docker-deploy.sh prod
   ```

5. **æŸ¥çœ‹çŠ¶æ€**
   ```bash
   docker-compose ps
   docker-compose logs -f
   ```

**ä¼˜ç‚¹ï¼š** ç¯å¢ƒä¸€è‡´ï¼Œæ˜“äºæ‰©å±•ï¼Œé€‚åˆç”Ÿäº§  
**ç¼ºç‚¹ï¼š** éœ€è¦å­¦ä¹  Docker åŸºç¡€

---

### æ–¹å¼ä¸‰ï¼šä¼ ç»Ÿéƒ¨ç½²ï¼ˆå­¦ä¹ ç”¨ï¼‰

**é€‚åˆäººç¾¤ï¼š** æƒ³æ·±å…¥å­¦ä¹  Linux å’ŒæœåŠ¡å™¨ç®¡ç†

**æ­¥éª¤ï¼š**

1. **å®‰è£…è½¯ä»¶**
   ```bash
   apt update
   apt install -y openjdk-17-jdk mysql-server redis-server nginx
   ```

2. **é…ç½®æ•°æ®åº“**
   ```bash
   mysql -u root -p
   # åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·
   ```

3. **éƒ¨ç½²åç«¯**
   ```bash
   mkdir -p /opt/travel-server
   # ä¸Šä¼  travel-server.jar
   cd /opt/travel-server
   chmod +x deploy/*.sh
   ./deploy/start.sh prod
   ```

4. **éƒ¨ç½²å‰ç«¯**
   ```bash
   mkdir -p /opt/travel-admin
   # ä¸Šä¼ å‰ç«¯ dist ç›®å½•å†…å®¹
   ```

5. **é…ç½® Nginx**
   ```bash
   vim /etc/nginx/sites-available/travel
   # é…ç½®åå‘ä»£ç†
   ```

**ä¼˜ç‚¹ï¼š** å®Œå…¨æ§åˆ¶ï¼Œå­¦ä¹ ä»·å€¼é«˜  
**ç¼ºç‚¹ï¼š** é…ç½®å¤æ‚ï¼Œå®¹æ˜“å‡ºé”™

---

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰å‡†å¤‡

- [ ] è´­ä¹°äº‘æœåŠ¡å™¨
- [ ] é€‰æ‹©æ“ä½œç³»ç»Ÿï¼ˆæ¨è Ubuntu 22.04ï¼‰
- [ ] å¼€æ”¾å¿…è¦ç«¯å£ï¼ˆ80, 443, 8070, 3306, 6379ï¼‰
- [ ] é…ç½® SSH å¯†é’¥ç™»å½•ï¼ˆå®‰å…¨ï¼‰

### ç¯å¢ƒå‡†å¤‡

- [ ] å®‰è£… Java 17
- [ ] å®‰è£… MySQL 8.0
- [ ] å®‰è£… Redis
- [ ] å®‰è£… Nginx

### åº”ç”¨éƒ¨ç½²

- [ ] æ„å»ºå‰ç«¯ï¼š`npm run build`
- [ ] æ‰“åŒ…åç«¯ï¼š`mvn clean package`
- [ ] ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨
- [ ] é…ç½®æ•°æ®åº“è¿æ¥
- [ ] é…ç½® Redis è¿æ¥
- [ ] é…ç½® Nginx åå‘ä»£ç†

### éƒ¨ç½²åæ£€æŸ¥

- [ ] åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨
- [ ] å‰ç«¯é¡µé¢æ˜¯å¦æ­£å¸¸è®¿é—®
- [ ] API æ¥å£æ˜¯å¦æ­£å¸¸
- [ ] æ•°æ®åº“è¿æ¥æ˜¯å¦æ­£å¸¸
- [ ] æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æ˜¯å¦æ­£å¸¸
- [ ] æ—¥å¿—æ˜¯å¦æ­£å¸¸è®°å½•

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

### æœåŠ¡ç®¡ç†

```bash
# å¯åŠ¨åç«¯
./deploy/start.sh prod

# åœæ­¢åç«¯
./deploy/stop.sh

# é‡å¯åç«¯
./deploy/restart.sh prod

# æŸ¥çœ‹çŠ¶æ€
./deploy/status.sh

# æŸ¥çœ‹æ—¥å¿—
tail -f logs/server.log
```

### Docker å‘½ä»¤

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹çŠ¶æ€
docker-compose ps

# é‡å¯æœåŠ¡
docker-compose restart backend
```

### ç³»ç»Ÿå‘½ä»¤

```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -tlnp | grep 8070

# æŸ¥çœ‹è¿›ç¨‹
ps aux | grep java

# æŸ¥çœ‹ç³»ç»Ÿèµ„æº
free -h
df -h
top
```

---

## ğŸ› å¸¸è§é—®é¢˜è§£å†³

### 1. ç«¯å£è¢«å ç”¨

```bash
# æŸ¥æ‰¾å ç”¨è¿›ç¨‹
lsof -i:8070
# æˆ–
netstat -tlnp | grep 8070

# æ€æ­»è¿›ç¨‹
kill -9 è¿›ç¨‹ID
```

### 2. æ•°æ®åº“è¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥ MySQL æ˜¯å¦è¿è¡Œ
systemctl status mysql

# æ£€æŸ¥ç”¨æˆ·æƒé™
mysql -u root -p
SHOW GRANTS FOR 'travel_user'@'localhost';

# æ£€æŸ¥é˜²ç«å¢™
ufw status
```

### 3. å‰ç«¯é¡µé¢ç©ºç™½

- æ£€æŸ¥ Nginx é…ç½®
- æ£€æŸ¥é™æ€æ–‡ä»¶è·¯å¾„
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
- æ£€æŸ¥ API ä»£ç†é…ç½®

### 4. æœåŠ¡æ— æ³•å¯åŠ¨

```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
tail -f logs/server.log

# æ£€æŸ¥ Java ç‰ˆæœ¬
java -version

# æ£€æŸ¥ jar æ–‡ä»¶
ls -lh travel-server.jar
```

---

## ğŸ“š å­¦ä¹ èµ„æº

### åœ¨çº¿æ–‡æ¡£

- [Linux å‘½ä»¤å¤§å…¨](https://www.linuxcool.com/)
- [Docker å®˜æ–¹æ–‡æ¡£](https://docs.docker.com/)
- [Nginx å®˜æ–¹æ–‡æ¡£](https://nginx.org/en/docs/)
- [å®å¡”é¢æ¿æ–‡æ¡£](https://www.bt.cn/bbs/forum-40-1.html)

### æ¨èä¹¦ç±

- ã€Šé¸Ÿå“¥çš„ Linux ç§æˆ¿èœã€‹
- ã€ŠDocker å®¹å™¨ä¸å®¹å™¨äº‘ã€‹
- ã€ŠNginx é«˜æ€§èƒ½ Web æœåŠ¡å™¨è¯¦è§£ã€‹

---

## ğŸ’¡ æœ€ä½³å®è·µ

1. **ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†é…ç½®**
   - ä¸è¦ç¡¬ç¼–ç å¯†ç 
   - ä½¿ç”¨ `.env` æ–‡ä»¶

2. **å®šæœŸå¤‡ä»½**
   - æ•°æ®åº“å¤‡ä»½
   - æ–‡ä»¶å¤‡ä»½
   - é…ç½®æ–‡ä»¶å¤‡ä»½

3. **ç›‘æ§å’Œæ—¥å¿—**
   - é…ç½®æ—¥å¿—è½®è½¬
   - ç›‘æ§æœåŠ¡å™¨èµ„æº
   - è®¾ç½®å‘Šè­¦

4. **å®‰å…¨åŠ å›º**
   - ä¿®æ”¹é»˜è®¤ç«¯å£
   - ä½¿ç”¨å¯†é’¥ç™»å½•
   - é…ç½®é˜²ç«å¢™
   - å®šæœŸæ›´æ–°ç³»ç»Ÿ

5. **æ€§èƒ½ä¼˜åŒ–**
   - å¯ç”¨ Gzip å‹ç¼©
   - é…ç½®ç¼“å­˜ç­–ç•¥
   - ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
   - ä½¿ç”¨ CDNï¼ˆå¦‚æœå¯èƒ½ï¼‰

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. é˜…è¯» [éƒ¨ç½²çŸ¥è¯†å®Œå…¨æŒ‡å—.md](./éƒ¨ç½²çŸ¥è¯†å®Œå…¨æŒ‡å—.md) äº†è§£è¯¦ç»†å†…å®¹
2. æ ¹æ®ä½ çš„æƒ…å†µé€‰æ‹©éƒ¨ç½²æ–¹å¼
3. æŒ‰ç…§æ­¥éª¤å®é™…æ“ä½œ
4. é‡åˆ°é—®é¢˜æŸ¥çœ‹å¸¸è§é—®é¢˜éƒ¨åˆ†
5. æŒç»­å­¦ä¹ å’Œä¼˜åŒ–

**è®°ä½ï¼šéƒ¨ç½²æ˜¯ä¸€ä¸ªå®è·µè¿‡ç¨‹ï¼Œå¤šåŠ¨æ‰‹ï¼Œå¤šå°è¯•ï¼** ğŸš€





































